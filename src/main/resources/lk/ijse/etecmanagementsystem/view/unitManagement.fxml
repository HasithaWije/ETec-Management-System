<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.Tooltip?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<BorderPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="700.0" prefWidth="1000.0" style="-fx-background-color: #f3f4f6;" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="lk.ijse.etecmanagementsystem.controller.UnitManagementController">
    <top>
        <HBox alignment="CENTER_LEFT" prefHeight="60.0" prefWidth="600.0" style="-fx-background-color: white; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5);" BorderPane.alignment="CENTER">
            <children>
                <Label text="Unit Control Center" textFill="#1e293b"><font><Font name="System Bold" size="18.0" /></font></Label>
            </children>
            <padding><Insets left="20.0" /></padding>
        </HBox>
    </top>
    <center>
        <TabPane fx:id="tabPaneProductItem" tabClosingPolicy="UNAVAILABLE" BorderPane.alignment="CENTER">
            <tabs>
                <Tab text="1. View Inventory">
                    <content>
                        <VBox spacing="10.0">
                            <children>
                                <HBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-background-color: white; -fx-padding: 10; -fx-background-radius: 5;">
                                    <children>
                                        <Label text="Filter by Product:" />
                                        <ComboBox fx:id="cmbViewProduct" onAction="#handleViewFilter" prefWidth="200.0" promptText="Select Product" stylesheets="@../css/CmbBoxStyle.css" />
                              <TextField fx:id="txtViewSearch" prefHeight="25.0" prefWidth="301.0" promptText="Search by Product ID, Name or Item Serial Number" HBox.hgrow="ALWAYS" />
                                        <Button mnemonicParsing="false" onAction="#handleRefreshView" style="-fx-background-color: #726e6e;" text="Refresh" textFill="WHITE">
                                 <cursor>
                                    <Cursor fx:constant="HAND" />
                                 </cursor></Button>
                              <Button mnemonicParsing="false" onAction="#handleResetView" style="-fx-background-color: #ff7e22;" text="Reset" textFill="WHITE">
                                 <cursor>
                                    <Cursor fx:constant="HAND" />
                                 </cursor>
                              </Button>
                                    </children>
                                </HBox>
                                <TableView fx:id="tblView" onMouseClicked="#handleMouseDoubleClicked" stylesheets="@../css/TableStyle.css" VBox.vgrow="ALWAYS">
                                    <columns>
                                        <TableColumn fx:id="colViewSerial" prefWidth="150.0" text="Serial Number" />
                                        <TableColumn fx:id="colViewSupplier" prefWidth="120.0" text="Supplier" />
                                        <TableColumn fx:id="colViewRemaining" prefWidth="130.0" style="-fx-alignment: CENTER;" text="Remaining Warranty" />
                                        <TableColumn fx:id="colViewSupWar" prefWidth="80.0" text="Sup. Limit" />
                                        <TableColumn fx:id="colViewCustWar" prefWidth="80.0" text="Cust. Limit" />
                                        <TableColumn fx:id="colViewStatus" prefWidth="90.0" text="Status" />
                                    </columns>
                                    <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                                </TableView>
                            </children>
                            <padding><Insets bottom="20.0" left="20.0" right="20.0" top="20.0" /></padding>
                        </VBox>
                    </content>
                </Tab>

                <Tab fx:id="tPAddNew" text="2. Add New Stock">
                    <content>
                        <HBox spacing="20.0">
                            <children>
                                <VBox prefHeight="600.0" prefWidth="450.0" spacing="15.0" style="-fx-background-color: white; -fx-background-radius: 8;">
                                    <children>
                                        <Label text="Batch Details" textFill="#3b82f6"><font><Font name="System Bold" size="14.0" /></font></Label>
                                        <HBox spacing="15.0">
                                            <children>
                                                <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                                    <children>
                                          <HBox prefHeight="0.0" prefWidth="185.0" spacing="5.0">
                                             <children>
                                                              <Label text="Select Product" textFill="#64748b">
                                                   <font>
                                                      <Font name="System Bold" size="12.0" />
                                                   </font>
                                                </Label>
                                                <Label fx:id="lblProductId" style="-fx-text-fill: gray; -fx-font-size: 12px;" text="ID: --">
                                                   <font>
                                                      <Font name="System Bold" size="12.0" />
                                                   </font>
                                                </Label>
                                             </children>
                                          </HBox>
                                                        <ComboBox fx:id="cmbProduct" maxWidth="1.7976931348623157E308" prefHeight="35.0" promptText="Choose Product..." style="-fx-background-color: #f8fafc; -fx-border-color: #e2e8f0; -fx-border-radius: 4;" stylesheets="@../css/CmbBoxStyle.css" />
                                                    </children>
                                                </VBox>
                                                <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label text="Select Supplier" textFill="#64748b"><font><Font name="System Bold" size="12.0" /></font></Label>
                                                        <HBox spacing="5.0">
                                                            <children>
                                                                <ComboBox fx:id="cmbSupplier" maxWidth="1.7976931348623157E308" prefHeight="35.0" promptText="Choose Supplier..." style="-fx-background-color: #f8fafc; -fx-border-color: #e2e8f0; -fx-border-radius: 4;" stylesheets="@../css/CmbBoxStyle.css" HBox.hgrow="ALWAYS" />
                                                                <Button mnemonicParsing="false" onAction="#handleClearSupplier" prefHeight="35.0" prefWidth="35.0" style="-fx-background-color: #e2e8f0; -fx-cursor: hand;" text="X" textFill="#64748b"><font><Font name="System Bold" size="12.0" /></font><tooltip><Tooltip text="Clear Supplier Selection" /></tooltip></Button>
                                                            </children>
                                                        </HBox>
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>
                                        <HBox spacing="15.0">
                                            <children>
                                                <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label text="Supplier Warranty (Months)" textFill="#64748b"><font><Font name="System Bold" size="12.0" /></font></Label>
                                                        <TextField fx:id="txtSupplierWarranty" prefHeight="35.0" promptText="e.g 12" style="-fx-background-color: #f8fafc; -fx-border-color: #e2e8f0; -fx-border-radius: 4;" />
                                                    </children>
                                                </VBox>
                                                <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                                    <children>
                                                        <Label text="Customer Warranty (Months)" textFill="#64748b"><font><Font name="System Bold" size="12.0" /></font></Label>
                                                        <TextField fx:id="txtCustomerWarranty" editable="false" prefHeight="35.0" promptText="Auto-filled" style="-fx-background-color: #e2e8f0; -fx-border-color: #cbd5e1; -fx-border-radius: 4; -fx-text-fill: #475569;" />
                                                        <Label text="* Defined in Product Settings" textFill="#94a3b8"><font><Font size="10.0" /></font></Label>
                                                    </children>
                                                </VBox>
                                            </children>
                                        </HBox>
                                        <Separator prefWidth="200.0" />
                                        <Label text="Scan Serials" textFill="#3b82f6"><font><Font name="System Bold" size="14.0" /></font></Label>
                                        <HBox spacing="10.0">
                                            <children>
                                                <TextField fx:id="txtSerialNumber" onAction="#handleAddToStaging" prefHeight="35.0" promptText="Scan &amp; hit Enter..." style="-fx-background-color: #f8fafc; -fx-border-color: #e2e8f0; -fx-border-radius: 4; -fx-font-family: 'Monospaced';" HBox.hgrow="ALWAYS" />
                                                <Button mnemonicParsing="false" onAction="#handleAddToStaging" prefHeight="35.0" prefWidth="45.0" style="-fx-background-color: #22c55e; -fx-cursor: hand;" text="+" textFill="WHITE"><font><Font name="System Bold" size="18.0" /></font></Button>
                                            </children>
                                        </HBox>
                                        <VBox spacing="5.0" VBox.vgrow="ALWAYS">
                                            <children>
                                                <HBox alignment="CENTER_LEFT" spacing="10.0">
                                                    <children>
                                                        <Label text="Ready to Save" textFill="#64748b" />
                                                        <Label fx:id="lblStagingCount" style="-fx-background-color: #f1f5f9;" text="0 Items" textFill="#475569" />
                                                        <HBox HBox.hgrow="ALWAYS" />
                                                        <Button mnemonicParsing="false" onAction="#handleRemoveFromStaging" prefHeight="25.0" prefWidth="35.0" style="-fx-background-color: #ef4444;" text="-" textFill="WHITE" />
                                                    </children>
                                                </HBox>
                                                <TableView fx:id="tblStaging" prefHeight="200.0" stylesheets="@../css/TableStyle.css" VBox.vgrow="ALWAYS">
                                                    <columns><TableColumn fx:id="colStagedSerial" prefWidth="250.0" text="Serial Number" /></columns>
                                                    <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                                                </TableView>
                                            </children>
                                        </VBox>
                                        <Button fx:id="btnSaveAll" maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#handleSaveAll" prefHeight="45.0" style="-fx-background-color: #f39c12; -fx-cursor: hand;" text="SAVE ALL" textFill="WHITE"><font><Font name="System Bold" size="14.0" /></font></Button>
                                    </children>
                                    <padding><Insets bottom="20.0" left="20.0" right="20.0" top="20.0" /></padding>
                                </VBox>
                                <VBox spacing="10.0" HBox.hgrow="ALWAYS">
                                    <children>
                                        <Label text="Recent Entries for Selected Product" textFill="#0284c7"><font><Font name="System Bold" size="12.0" /></font></Label>
                                        <TableView fx:id="tblHistory" stylesheets="@../css/TableStyle.css" VBox.vgrow="ALWAYS">
                                            <columns>
                                                <TableColumn fx:id="colHistSerial" prefWidth="150.0" text="Serial Number" />
                                                <TableColumn fx:id="colHistSupplier" prefWidth="120.0" text="Supplier" />
                                                <TableColumn fx:id="colHistSupWar" prefWidth="90.0" text="Sup. War." />
                                                <TableColumn fx:id="colHistCustWar" prefWidth="90.0" text="Cust. War." />
                                                <TableColumn fx:id="colHistStatus" prefWidth="90.0" text="Status" />
                                            </columns>
                                            <columnResizePolicy><TableView fx:constant="CONSTRAINED_RESIZE_POLICY" /></columnResizePolicy>
                                        </TableView>
                                    </children>
                                    <padding><Insets bottom="20.0" right="20.0" top="20.0" /></padding>
                                </VBox>
                            </children>
                            <padding><Insets bottom="20.0" left="20.0" right="20.0" top="20.0" /></padding>
                        </HBox>
                    </content>
                </Tab>

                <Tab text="3. Correction Center">
                    <content>
                        <VBox alignment="TOP_CENTER" spacing="20.0">
                            <padding><Insets top="40.0" /></padding>
                            <children>
                                <Label text="Correction Center: Fix Data Entry Mistakes" textFill="#ec4899"><font><Font name="System Bold" size="16.0" /></font></Label>
                                <HBox alignment="CENTER" spacing="10.0">
                                    <children>
                                        <TextField fx:id="txtFixSearch" onAction="#handleFixSearch" prefHeight="40.0" prefWidth="300.0" promptText="Enter Serial Number to Fix..." style="-fx-font-size: 14;" />
                                        <Button mnemonicParsing="false" onAction="#handleFixSearch" prefHeight="40.0" style="-fx-background-color: #3b82f6;" text="Search" textFill="WHITE"><font><Font name="System Bold" size="12.0" /></font></Button>
                                    </children>
                                </HBox>
                                <VBox fx:id="vboxFixDetails" disable="true" maxWidth="600.0" spacing="15.0" style="-fx-background-color: white; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5); -fx-background-radius: 8;">
                                    <children>
                                        <Label text="Correct the Details Below" textFill="#64748b"><font><Font name="System Bold" size="12.0" /></font></Label>
                                        <HBox spacing="15.0">
                                            <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Label text="Serial Number" textFill="#94a3b8" />
                                                    <TextField fx:id="txtFixSerial" style="-fx-background-color: #fff1f2; -fx-border-color: #e2e8f0;" />
                                                </children>
                                            </VBox>
                                            <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Label text="Product" textFill="#94a3b8" />
                                                    <ComboBox fx:id="cmbFixProduct" maxWidth="1.7976931348623157E308" style="-fx-background-color: #f8fafc; -fx-border-color: #e2e8f0;" stylesheets="@../css/CmbBoxStyle.css" />
                                                </children>
                                            </VBox>
                                        </HBox>
                                        <HBox spacing="15.0">
                                            <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Label text="Supplier" textFill="#94a3b8" />
                                                    <ComboBox fx:id="cmbFixSupplier" maxWidth="1.7976931348623157E308" style="-fx-background-color: #f8fafc; -fx-border-color: #e2e8f0;" stylesheets="@../css/CmbBoxStyle.css" />
                                                </children>
                                            </VBox>
                                            <VBox spacing="5.0" HBox.hgrow="ALWAYS">
                                                <children>
                                                    <Label text="Supplier Warranty" textFill="#94a3b8" />
                                                    <TextField fx:id="txtFixSupWar" style="-fx-background-color: #f8fafc; -fx-border-color: #e2e8f0;" />
                                                </children>
                                            </VBox>
                                        </HBox>
                                        <Separator />
                                        <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#handleFixSave" prefHeight="45.0" style="-fx-background-color: #ec4899; -fx-cursor: hand;" text="CONFIRM CORRECTIONS" textFill="WHITE"><font><Font name="System Bold" size="14.0" /></font></Button>
                                    </children>
                                    <padding><Insets bottom="30.0" left="30.0" right="30.0" top="30.0" /></padding>
                                </VBox>
                            </children>
                        </VBox>
                    </content>
                </Tab>

                <Tab fx:id="tPUpdateStatus" text="4. Update Status">
                    <content>
                        <VBox alignment="TOP_CENTER" spacing="20.0">
                            <padding><Insets top="40.0" /></padding>
                            <children>
                                <Label text="Item Workflow: Update Status" textFill="#1e293b"><font><Font name="System Bold" size="16.0" /></font></Label>

                                <HBox alignment="CENTER" spacing="10.0">
                                    <children>
                                        <TextField fx:id="txtStatusSearch" onAction="#handleStatusSearch" prefHeight="40.0" prefWidth="300.0" promptText="Scan Serial Number..." style="-fx-font-size: 14;" />
                                        <Button mnemonicParsing="false" onAction="#handleStatusSearch" prefHeight="40.0" style="-fx-background-color: #3b82f6;" text="Search" textFill="WHITE"><font><Font name="System Bold" size="12.0" /></font></Button>
                                    </children>
                                </HBox>

                                <VBox fx:id="vboxStatusUpdate" disable="true" maxWidth="500.0" spacing="15.0" style="-fx-background-color: white; -fx-effect: dropshadow(three-pass-box, rgba(0,0,0,0.1), 10, 0, 0, 5); -fx-background-radius: 8;">
                                    <children>
                                        <Label text="Item Information" textFill="#64748b"><font><Font name="System Bold" size="12.0" /></font></Label>

                                        <HBox spacing="10.0">
                                            <Label text="Product:" textFill="#94a3b8" />
                                            <Label fx:id="lblUpdateProductName" text="-" textFill="#1e293b"><font><Font name="System Bold" size="12.0" /></font></Label>
                                        </HBox>

                                        <HBox spacing="10.0">
                                            <Label text="Supplier:" textFill="#94a3b8" />
                                            <Label fx:id="lblUpdateSupplier" text="-" textFill="#1e293b"><font><Font name="System Bold" size="12.0" /></font></Label>
                                        </HBox>

                                        <HBox spacing="10.0">
                                            <Label text="Current Status:" textFill="#94a3b8" />
                                            <Label fx:id="lblCurrentStatus" text="-" textFill="#1e293b"><font><Font name="System Bold" size="12.0" /></font></Label>
                                        </HBox>

                                        <Separator />
                                        <Label text="Select New Action" textFill="#64748b"><font><Font name="System Bold" size="12.0" /></font></Label>
                                        <ComboBox fx:id="cmbNewStatus" maxWidth="1.7976931348623157E308" prefHeight="40.0" style="-fx-font-size: 14; -fx-background-color: #f0fdf4; -fx-border-color: #e2e8f0;" stylesheets="@../css/CmbBoxStyle.css" />
                                        <Button maxWidth="1.7976931348623157E308" mnemonicParsing="false" onAction="#handleStatusSave" prefHeight="45.0" style="-fx-background-color: #f39c12; -fx-cursor: hand;" text="UPDATE STATUS" textFill="WHITE"><font><Font name="System Bold" size="14.0" /></font></Button>
                                    </children>
                                    <padding><Insets bottom="30.0" left="30.0" right="30.0" top="30.0" /></padding>
                                </VBox>
                            </children>
                        </VBox>
                    </content>
                </Tab>
            </tabs>
        </TabPane>
    </center>
</BorderPane>
